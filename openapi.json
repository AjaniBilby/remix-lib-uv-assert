{"openapi":"3.0.0","info":{"title":"API Documentation","version":"1.2.0"},"paths":{"/api/address/validate/{courier}":{"post":{"summary":"Check an address is valid before creating an order","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"courier","description":"which couriers is this valid for?","required":true,"in":"path","schema":{"type":"string","enum":["all","auspost","toll"]}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"valid":{"type":"boolean"}},"required":["valid"]}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: API key not supplied"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"}},"tags":["Helper"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"max 40 char"},"businessName":{"type":"string","description":"max 40 char"},"email":{"type":"string","format":"email","description":"max 320 char (email or phone must be present)"},"phone":{"type":"string","description":"max 15 char (email or phone must be present)"},"line1":{"type":"string","description":"max 40 char"},"line2":{"type":"string","description":"max 40 char"},"line3":{"type":"string","description":"max 40 char"},"suburb":{"type":"string","description":"max 40 char"},"postcode":{"type":"string","description":"max 4 char"},"state":{"type":"string","description":"max  3 char"}},"required":["name","email","line1","suburb","postcode","state"]}}}}}},"/api/order/new":{"post":{"summary":"Create a new Dropship Order","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummary"}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: API key not supplied"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"409":{"headers":{"Last-Modified":{"description":"","schema":{"type":"string","format":"date-time"}},"Location":{"description":"Where the order details can be loaded","schema":{"type":"string"}},"order-id":{"description":"The found order's ID number","schema":{"type":"number"}}},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Conflict: Order Already Exists"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"ref":{"type":"string","description":"Custom identifier, must be unique per vendor (max length 70 char)"},"vendor":{"$ref":"#/components/schemas/Identifier"},"type":{"$ref":"#/components/schemas/Identifier"},"lines":{"type":"array","items":{"type":"object","properties":{"material":{"$ref":"#/components/schemas/Identifier"},"qty":{"type":"number","description":"the amount of the item (depends on material, most often \"each\")"},"materialID":{"type":"integer","description":"deprecated use material.id"},"ref":{"type":"string","description":"deprecated use material.ref"}},"required":["material","qty"]}},"address":{"$ref":"#/components/schemas/Address"},"shipment_features":{"type":"object","properties":{"authority_to_leave":{"type":"boolean","description":"default: true"},"safe_drop_enabled":{"type":"boolean","description":"default: false"},"identity_on_delivery":{"type":"string","description":"format: /(no redirect!)?(occupant|addressee):(.*)/"},"delivery_times":{"type":"string","description":"e.g. \"09:00:00-12:00:00,13:00:00-17:00:00\""},"delivery_instructions":{"type":"string","description":"max 128 chars"}},"description":"ignored for letters"},"webhook":{"$ref":"#/components/schemas/Webhook"},"vendorID":{"type":"integer","description":"deprecated use vendor.id"},"vendorRef":{"type":"string","description":"deprecated use vendor.ref"},"typeID":{"type":"integer","description":"deprecated use type.id instead"}},"required":["vendor","type","lines","address"]}}}}}},"/api/order/{orderID}":{"get":{"summary":"Get Order details","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"orderID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummary"}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: Invalid api key"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Vendor"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"]}},"/api/order/{orderID}/cancel":{"post":{"summary":"Cancel an order","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"orderID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"409":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Cannot cancel order (already allocated or locked)"}},"tags":["Dropship"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"reason":{"type":"string","description":"why was the order canceled?"}},"required":["reason"]}}}}}},"/api/order/{orderID}/listener":{"put":{"summary":"Bind order update listener","description":"Set the webhook for order updates to this endpoint, expires after 60 days of in-activity","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"orderID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"}},"tags":["Dropship"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Webhook"}}}}},"delete":{"summary":"Unbind order update listener","description":"Will return successful even if no listener is present","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"orderID","description":"under which brand is the order being made","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Order"}},"tags":["Dropship"]}},"/api/order/{orderID}/listener/poke":{"get":{"summary":"Send order webhook and return response","description":"See the response our server gets when sending the webhook to the listener","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"orderID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"object","properties":{"text":{"type":"string"},"code":{"type":"number"}},"required":["text","code"]},"headers":{"type":"object","properties":{}},"body":{"type":"string"}},"required":["status","headers","body"]}},"required":["response"]}}},"description":"Ok"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Order/Missing Webhook"}},"tags":["Debug"]}},"/api/repair/case/new":{"post":{"summary":"Create a new Repair Order","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummary"}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: API key not supplied"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"409":{"headers":{"Last-Modified":{"description":"","schema":{"type":"string","format":"date-time"}},"Location":{"description":"Where the order details can be loaded","schema":{"type":"string"}},"repair-id":{"description":"The found order's ID number","schema":{"type":"number"}}},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Conflict: Repair Already Exists"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Repair"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"ref":{"type":"string","description":"Unique identifier (jobNo/rmaNo)"},"workflow":{"$ref":"#/components/schemas/Identifier"},"vendor":{"$ref":"#/components/schemas/Identifier"},"kind":{"$ref":"#/components/schemas/Identifier"},"focus":{"type":"object","properties":{"material":{"$ref":"#/components/schemas/Identifier"},"serial":{"type":"string"}},"required":["material","serial"]},"summary":{"type":"string"},"source":{"type":"string"},"symptoms":{"type":"array","items":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"]}},"attributes":{"type":"object","properties":{},"description":"any extra attributes for a repair ({\"MAC_ADDRESS\": \"...\"})"},"address":{"$ref":"#/components/schemas/Address"},"webhook":{"$ref":"#/components/schemas/Webhook"}},"required":["workflow","vendor","kind","focus","symptoms","attributes"]}}}}}},"/api/repair/case/{repairID}":{"get":{"summary":"Get Order details","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"repairID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepairSummary"}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: Invalid api key"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Vendor"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Repair"]}},"/api/repair/case/{repairID}/listener":{"put":{"summary":"Bind order update listener","description":"Set the webhook for repair updates to this endpoint, expires after 60 days of in-activity","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"repairID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"}},"tags":["Repair"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Webhook"}}}}},"delete":{"summary":"Unbind order update listener","description":"Will return successful even if no listener is present","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"repairID","description":"under which brand is the order being made","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}},"description":"Ok"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Order"}},"tags":["Repair"]}},"/api/repair/case/{repairID}/poke":{"get":{"summary":"Send an update to the webhook now","description":"For testing purposes","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"repairID","description":"","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"sent":{"type":"boolean"},"success":{"type":"boolean"}},"required":["sent","success"]}}},"description":"Ok"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Order"}},"tags":["Repair"]}},"/api/tracking/queue":{"get":{"summary":"List of tracking numbers in the queue","description":"All tracking numbers currently queued to get status updates","parameters":[{"name":"Cache-Control","description":"If contains \"only-if-cached\", the system will not schedule a refresh","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"queue":{"type":"array","items":{"type":"string"}}},"required":["queue"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"],"deprecated":true}},"/api/tracking/{trackingNum}/raw":{"get":{"summary":"Get raw tracking details","description":"Responds with the raw tracking details from Auspost, if known","parameters":[{"name":"Cache-Control","description":"If contains \"only-if-cached\", the system will not schedule a refresh","required":true,"in":"header","schema":{"type":"string"}},{"name":"trackingNum","description":"the tracking number","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"tracking_id":{"type":"string"},"errors":{"type":"object","properties":{}},"status":{"type":"string"},"consignment":{"type":"array","items":{"type":"object","properties":{}}},"trackable_items":{"type":"array","items":{"type":"object","properties":{}}}},"required":["tracking_id","errors","status","consignment","trackable_items"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"],"deprecated":true}},"/api/tracking/{trackingNum}/summary":{"get":{"summary":"Get a summary of tracking details","description":"Responds with the raw tracking details from Auspost, if known","parameters":[{"name":"Cache-Control","description":"If contains \"only-if-cached\", the system will not schedule a refresh","required":true,"in":"header","schema":{"type":"string"}},{"name":"trackingNum","description":"the tracking number","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"headers":{"Expires":{"description":"When will the tracking number refresh in ISO date","schema":{"type":"string","format":"date-time"}},"Last-Modified":{"description":"When was the tracking last updated","schema":{"type":"string","format":"date-time"}}},"content":{"application/json":{"schema":{"type":"object","properties":{"tracking_id":{"type":"string"},"status":{"type":"string"},"latestEvent":{"type":"object","properties":{"location":{"type":"string"},"description":{"type":"string"},"date":{"type":"string"}},"required":["location","description","date"]}},"required":["tracking_id","status","latestEvent"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Tracking data not found, and not scheduled for update"},"425":{"headers":{"Expires":{"description":"When will the tracking number refresh in ISO date (not present if not scheduled)","schema":{"type":"string","format":"date-time"}},"Last-Modified":{"description":"When was the tracking last updated","schema":{"type":"string","format":"date-time"}}},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Too Early: no tracking information yet"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"],"deprecated":true}},"/api/vendor":{"get":{"summary":"Get all vendors this API key has access to","description":"","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"200":{"headers":{},"content":{"application/json":{"schema":{"type":"object","properties":{"vendors":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name"]}}},"required":["vendors"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: Invalid api key"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Vendor"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"]}},"/api/vendor/{vendor}/order":{"get":{"summary":"Get valid order metadata","description":"Responds with all valid order types, and status progression order","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"vendor","description":"under which brand is the order being made (can be id or ref)","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"headers":{"Expires":{"description":"When these values might possibly change next","schema":{"type":"string","format":"date-time"}},"Cache-Control":{"description":"How long until these values might become invalid","schema":{"type":"string"}}},"content":{"application/json":{"schema":{"type":"object","properties":{"statuses":{"type":"array","items":{"type":"string"},"description":"In traversal order (i.e. PACKED <= x, means it has been packed)"},"orderTypes":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"ref":{"type":"string"},"name":{"type":"string"}},"required":["id","ref","name"]},"description":"order types owned by this vendor (not including parent's)"}},"required":["statuses","orderTypes"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: Invalid api key"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Vendor"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Dropship"]}},"/api/vendor/{vendor}/order/lookup":{"get":{"summary":"Get order by reference","description":"Useful when orderID is unknown, but reference has already been used","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"vendor","description":"under which brand is the order being made (can be id or ref)","required":true,"in":"path","schema":{"type":"string"}},{"name":"ref","description":"lookup an order by reference","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"301":{"headers":{"Location":{"description":"Where the order details can be loaded","schema":{"type":"string"}},"order-id":{"description":"The found order's ID number","schema":{"type":"number"}}},"content":{},"description":"Redirected to found order"},"400":{"headers":{},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralErrors"}}},"description":"Bad Request"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Order"}},"tags":["Dropship"]}},"/api/vendor/{vendor}/stock":{"get":{"summary":"Get stock quantities","description":"The quantity of stock per material per vendor","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"vendor","description":"under which brand is the order being made (can be id or ref)","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"headers":{"Date":{"description":"When the stock quantities were gathered (UTC format)","schema":{"type":"string","format":"date-time"}}},"content":{"application/json":{"schema":{"type":"object","properties":{"Date":{"type":"string","format":"date-time","description":"When the stock quantities were gathered (ISO format)"},"stock":{"type":"array","items":{"type":"object","properties":{"material":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name"]},"vendored":{"type":"array","items":{"type":"object","properties":{"vendor":{"type":"string","description":"vendor.ref"},"quantity":{"type":"integer"}},"required":["vendor","quantity"]}},"total":{"type":"integer","description":"the total across all vendors"}},"required":["material","vendored","total"]}},"vendors":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name"]}}},"required":["Date","stock","vendors"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: Invalid api key"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Vendor"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Stock"]}},"/api/vendor/{vendor}/stock/{material}/items":{"get":{"summary":"Get valid order metadata","description":"Responds with all valid order types, and status progression order","parameters":[{"name":"API-KEY","description":"Authentication","required":true,"in":"header","schema":{"type":"string"}},{"name":"vendor","description":"under which brand is the order being made (can be id or ref)","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"headers":{"Date":{"description":"When the items were gathered (UTC format)","schema":{"type":"string","format":"date-time"}}},"content":{"application/json":{"schema":{"type":"object","properties":{"Date":{"type":"string","format":"date-time","description":"When the items were gathered (ISO format)"},"stock":{"type":"array","items":{"type":"object","properties":{"material":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name"]}},"required":["material"]}},"vendors":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name"]}}},"required":["Date","stock","vendors"]}}},"description":"Ok"},"401":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unauthorised: Invalid api key"},"403":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Forbidden: Insufficient Permissions"},"404":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Unknown Vendor"},"500":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Internal Server Error"},"504":{"headers":{},"content":{"text/plain":{"schema":{"type":"object","properties":{}}}},"description":"Gateway timeout"}},"tags":["Stock"]}}},"components":{"schemas":{"Address":{"type":"object","properties":{"name":{"type":"string","description":"max 40 char /^[a-z0-9 ]+$/i"},"businessName":{"type":"string","description":"max 40 char /^[a-z0-9 ]+$/i"},"email":{"type":"string","format":"email","description":"max 320 char (email or phone must be present)"},"phone":{"type":"string","description":"max 15 char (email or phone must be present)"},"line1":{"type":"string","description":"max 40 char /^[a-z0-9\\\\- \\\\/\\\\.\\\\,]+$/i"},"line2":{"type":"string","description":"max 40 char /^[a-z0-9\\\\- \\\\/\\\\.\\\\,]+$/i"},"line3":{"type":"string","description":"max 40 char /^[a-z0-9\\\\- \\\\/\\\\.\\\\,]+$/i"},"suburb":{"type":"string","description":"max 40 char /^[a-z ]+$/i"},"postcode":{"type":"string","description":"max 4 char /^[0-9]+$/"},"state":{"type":"string","description":"max  3 char"}},"required":["name","email","line1","suburb","postcode","state"]},"GeneralErrors":{"type":"object","properties":{"errors":{"type":"array","items":{"type":"object","properties":{"field":{"type":"string","description":"Which field this error applies to (i.e. lines[2].materialID)"},"message":{"type":"string","description":"The reason why the request failed"}},"required":["field","message"]}}},"required":["errors"]},"Identifier":{"type":"object","properties":{"id":{"type":"integer"},"ref":{"type":"string"}},"description":"must specify at least one"},"Identity":{"type":"object","properties":{"id":{"type":"integer"},"ref":{"type":"string"}},"required":["id","ref"]},"OrderItems":{"type":"array","items":{"type":"object","properties":{"material":{"$ref":"#/components/schemas/Identity"},"serial":{"type":"string"},"attributes":{"type":"object","properties":{},"description":"any extra unique attributes for an item ({\"MAC_ADDRESS\": \"...\"})"},"materialID":{"type":"integer","description":"deprecated use material.id"},"ref":{"type":"string","description":"deprecated use material.ref"}},"required":["material","serial","attributes"]}},"OrderLines":{"type":"array","items":{"type":"object","properties":{"material":{"$ref":"#/components/schemas/Identity"},"quantity":{"type":"object","properties":{"ordered":{"type":"number","description":"how many were originally ordered"},"allocated":{"type":"number","description":"how many were fulfilled"}},"required":["ordered","allocated"]},"ordered":{"type":"number","description":"deprecated use quantity.ordered"},"allocated":{"type":"number","description":"deprecated use quantity.allocated"},"materialID":{"type":"integer","description":"deprecated use material.id"},"ref":{"type":"string","description":"deprecated use material.ref"}},"required":["material","quantity"]}},"OrderStatus":{"type":"string","enum":["CREATED","CANCELED","ALLOCATED","PACKED","SHIPPED","IN_TRANSIT","OUT_BOUND","DELIVERED","TRANSIT_FAILED"],"description":"Don't forget these may change with time (see /api/vendor/{vendorID}/order)"},"OrderSummary":{"type":"object","properties":{"id":{"type":"integer"},"ref":{"type":"string","description":"Unique identifier"},"vendor":{"$ref":"#/components/schemas/Identity"},"type":{"$ref":"#/components/schemas/Identity"},"status":{"$ref":"#/components/schemas/OrderStatus"},"lines":{"$ref":"#/components/schemas/OrderLines"},"items":{"$ref":"#/components/schemas/OrderItems"},"shipment":{"type":"object","properties":{"courier":{"type":"string","enum":["Auspost","Toll"]},"tracking_number":{"type":"string"},"tracking_url":{"type":"string","description":"customer facing tracking url (for Auspost or TGE)"},"items":{"type":"array","items":{"type":"object","properties":{"consignment_id":{"type":"string"},"article_id":{"type":"string","description":"aka sscc for toll"}},"required":["consignment_id","article_id"]}}},"required":["courier","items"],"description":"shipment details if present"},"webhook":{"type":"boolean","description":"whether or not a webhook has been successfully bound"},"vendorID":{"type":"integer","description":"deprecated use vendor.id"},"vendorRef":{"type":"string","description":"deprecated use vendor.ref"},"typeID":{"type":"integer","description":"deprecated use type.id"}},"required":["id","vendor","type","status","lines","items","webhook"]},"RepairCodes":{"type":"array","items":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"}},"required":["code","name"]}},"RepairSummary":{"type":"object","properties":{"id":{"type":"integer"},"ref":{"type":"string","description":"Unique identifier"},"workflow":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name","ref"]},"vendor":{"type":"object","properties":{"id":{"type":"number"},"ref":{"type":"string"}},"required":["id","ref"],"description":"Which vendor/brand is this repair under"},"kind":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"ref":{"type":"string"}},"required":["id","name","ref"],"description":"The type of repair"},"focus":{"type":"object","properties":{"material":{"type":"object","properties":{"id":{"type":"number"},"ref":{"type":"string"}},"required":["id","ref"],"description":"model being repaired"},"serial":{"type":"string"}},"required":["material","serial"]},"status":{"type":"object","properties":{"major":{"type":"string","enum":["OPEN","HOLD","CLOSED"]},"minor":{"type":"string"}},"required":["major","minor"]},"level":{"type":"object","properties":{"name":{"type":"string"},"ref":{"type":"string"}},"required":["name","ref"]},"summary":{"type":"string"},"source":{"type":"string"},"symptoms":{"$ref":"#/components/schemas/RepairCodes"},"diagnoses":{"$ref":"#/components/schemas/RepairCodes"},"resolutions":{"$ref":"#/components/schemas/RepairCodes"},"accessories":{"type":"array","items":{"type":"string"}},"attributes":{"type":"object","properties":{},"description":"any extra attributes for a repair ({\"MAC_ADDRESS\": \"...\"})"},"stats":{"type":"object","properties":{"leadTime":{"type":"number","description":"business days from creation to completion (1.0 = 1 day)"},"activeTime":{"type":"number","description":"business days from creation to completion - hold periods (1.0 = 1 day)"},"workTime":{"type":"number","description":"total time spent in actions+comments (ms)"}},"required":["leadTime","activeTime","workTime"]},"updatedAt":{"type":"string","format":"date-time"},"createdAt":{"type":"string","format":"date-time"},"webhook":{"type":"boolean","description":"whether or not a webhook has been successfully bound"}},"required":["id","workflow","vendor","kind","focus","status","level","summary","source","symptoms","diagnoses","resolutions","accessories","attributes","stats","updatedAt","createdAt","webhook"]},"Webhook":{"type":"object","properties":{"url":{"type":"string","description":"max 2048"},"headers":{"type":"object","properties":{"Authorization":{"type":"string","description":"this is an example header, not required"}},"description":"string key, string value"}},"required":["url","headers"]}}}}